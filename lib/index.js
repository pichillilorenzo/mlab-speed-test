"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MLabSpeedTest=void 0;const tslib_1=require("tslib"),events_1=tslib_1.__importDefault(require("events")),worker_threads_1=require("worker_threads"),path_1=tslib_1.__importDefault(require("path"));class MLabSpeedTest extends events_1.default{_running=!1;_worker;constructor(){super()}get running(){return this._running}async run(){if(!this._running)return this._running=!0,this._worker=new worker_threads_1.Worker(path_1.default.join(__dirname,"worker.js")),new Promise((t,s)=>{this._worker?.on("message",e=>{const r=e[0];if(this.emit(r,...e.slice(1)),r==="complete"){this._running=!1,t(e[1]);return}})})}async stop(){await this._worker?.terminate(),this._worker=void 0,this._running=!1}}exports.MLabSpeedTest=MLabSpeedTest;